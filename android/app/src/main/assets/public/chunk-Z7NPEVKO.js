import{a as G,b as J,c as K,d as Q}from"./chunk-W4MQIXV3.js";import{c as P,d as M,e as k,f as R,g as w,h as D,i as F,j as O,k as T,l as z,m as B,n as N,o as U,p as H,q as L,r as j,s as q,u as A}from"./chunk-32JNCDV7.js";import"./chunk-62KKBQKF.js";import"./chunk-OPOPYXTZ.js";import"./chunk-QUJFQN2Y.js";import"./chunk-YOZNQCKQ.js";import"./chunk-TO3YK3EL.js";import"./chunk-TFRGKSYX.js";import"./chunk-5PZWBJ5K.js";import"./chunk-QGWWHAGH.js";import"./chunk-SS7TARZG.js";import"./chunk-M66VC23L.js";import"./chunk-C53WGXWK.js";import"./chunk-EY55SHVB.js";import"./chunk-LBMIQEU6.js";import"./chunk-WI5MSH4N.js";import"./chunk-WMQ3YVF2.js";import"./chunk-CKP3SGE2.js";import"./chunk-ZWD2LTBS.js";import{B as c,C as x,D as e,E as t,F as s,K as f,L as C,T as n,U as b,Ua as E,V as y,fa as I,la as S,q as h,r as i,s as v,u as _,y as p}from"./chunk-2R7TGF7V.js";import"./chunk-KGSAT2V3.js";import"./chunk-6E6KLUTW.js";import"./chunk-7SAK7W3C.js";import"./chunk-6N6ZTUD2.js";import"./chunk-Z3EESIK6.js";import"./chunk-FXFZIWDD.js";import"./chunk-ZD3NZWAU.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{h as d}from"./chunk-LNJ3S2LQ.js";function V(r,l){r&1&&s(0,"ion-spinner",20)}function W(r,l){r&1&&(e(0,"div",21),s(1,"ion-icon",22),e(2,"p"),n(3,"Nenhuma foto capturada"),t()())}function X(r,l){r&1&&(e(0,"div",26),s(1,"ion-icon",27),e(2,"span"),n(3,"Rosto Detectado"),t()())}function Y(r,l){if(r&1&&(e(0,"div",23),s(1,"img",24),p(2,X,4,0,"div",25),t()),r&2){let u=C();i(),c("src",u.foto,h),i(),c("ngIf",u.rostoDetectado)}}var re=(()=>{let l=class l{constructor(o){this.faceRecognitionService=o,this.carregando=!1,this.rostoDetectado=!1,this.mensagem=""}ngOnInit(){this.mensagem="Pronto para capturar foto facial."}carregarModelos(){return d(this,null,function*(){this.mensagem="Sistema de reconhecimento facial ativo."})}capturarFoto(){return d(this,null,function*(){try{let o=yield K.getPhoto({quality:90,allowEditing:!1,resultType:J.DataUrl,source:G.Camera});this.foto=o.dataUrl,yield this.analisarRosto()}catch(o){console.error("Erro ao capturar foto:",o),this.mensagem="Erro ao capturar foto."}})}analisarRosto(){return d(this,null,function*(){if(this.foto){this.carregando=!0,this.mensagem="Analisando rosto...";try{(yield this.faceRecognitionService.extractFaceDescriptor(this.foto))?(this.rostoDetectado=!0,this.mensagem="Rosto detectado com sucesso!"):(this.rostoDetectado=!1,this.mensagem="Nenhum rosto detectado. Tente novamente.")}catch(o){console.error("Erro na an\xE1lise:",o),this.mensagem="Erro na an\xE1lise do rosto."}finally{this.carregando=!1}}})}salvarCadastro(){return d(this,null,function*(){if(!this.foto||!this.rostoDetectado){this.mensagem="\xC9 necess\xE1rio capturar uma foto com rosto detectado.";return}this.carregando=!0,this.mensagem="Salvando cadastro...";try{let o=yield this.faceRecognitionService.extractFaceDescriptor(this.foto);o?(this.faceRecognitionService.saveFaceDescriptor("user_12345",o),localStorage.setItem("user_face_photo",this.foto),this.mensagem="Cadastro facial realizado com sucesso!"):this.mensagem="Erro ao processar o rosto. Tente novamente."}catch(o){console.error("Erro ao salvar:",o),this.mensagem="Erro ao salvar cadastro."}finally{this.carregando=!1}})}limparCadastro(){this.foto=void 0,this.rostoDetectado=!1,this.mensagem=""}};l.\u0275fac=function(m){return new(m||l)(v(Q))},l.\u0275cmp=_({type:l,selectors:[["app-cadastro-rosto"]],decls:55,vars:12,consts:[[3,"translucent"],["slot","start"],["defaultHref","/tabs/home"],[3,"fullscreen"],[1,"container"],[1,"status-container"],["name","crescent",4,"ngIf"],[1,"foto-container"],["class","foto-placeholder",4,"ngIf"],["class","foto-preview-container",4,"ngIf"],["expand","block","fill","outline",3,"click","disabled"],["name","camera","slot","start"],["name","sunny","slot","start","color","warning"],["name","person","slot","start","color","primary"],["name","eye","slot","start","color","success"],[1,"action-buttons"],["expand","block","color","success",3,"click","disabled"],["name","save","slot","start"],["expand","block","fill","outline","color","medium",3,"click","disabled"],["name","refresh","slot","start"],["name","crescent"],[1,"foto-placeholder"],["name","person","size","large"],[1,"foto-preview-container"],["alt","Foto capturada",1,"foto-preview",3,"src"],["class","detection-overlay",4,"ngIf"],[1,"detection-overlay"],["name","checkmark-circle","color","success"]],template:function(m,a){m&1&&(e(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),s(3,"ion-back-button",2),t(),e(4,"ion-title"),n(5,"Cadastro Facial"),t()()(),e(6,"ion-content",3)(7,"div",4)(8,"ion-card")(9,"ion-card-content")(10,"div",5),p(11,V,1,0,"ion-spinner",6),e(12,"p"),n(13),t()()()(),e(14,"ion-card")(15,"ion-card-header")(16,"ion-card-title"),n(17,"Foto para Cadastro Facial"),t(),e(18,"ion-card-subtitle"),n(19,"Capture uma foto clara do seu rosto"),t()(),e(20,"ion-card-content")(21,"div",7),p(22,W,4,0,"div",8)(23,Y,3,2,"div",9),t(),e(24,"ion-button",10),f("click",function(){return a.capturarFoto()}),s(25,"ion-icon",11),n(26),t()()(),e(27,"ion-card")(28,"ion-card-header")(29,"ion-card-title"),n(30,"Instru\xE7\xF5es"),t()(),e(31,"ion-card-content")(32,"ion-list")(33,"ion-item"),s(34,"ion-icon",12),e(35,"ion-label")(36,"p"),n(37,"Use boa ilumina\xE7\xE3o"),t()()(),e(38,"ion-item"),s(39,"ion-icon",13),e(40,"ion-label")(41,"p"),n(42,"Olhe diretamente para a c\xE2mera"),t()()(),e(43,"ion-item"),s(44,"ion-icon",14),e(45,"ion-label")(46,"p"),n(47,"Mantenha o rosto vis\xEDvel"),t()()()()()(),e(48,"div",15)(49,"ion-button",16),f("click",function(){return a.salvarCadastro()}),s(50,"ion-icon",17),n(51," Salvar Cadastro Facial "),t(),e(52,"ion-button",18),f("click",function(){return a.limparCadastro()}),s(53,"ion-icon",19),n(54," Limpar e Recome\xE7ar "),t()()()()),m&2&&(c("translucent",!0),i(6),c("fullscreen",!0),i(5),c("ngIf",a.carregando),i(),x(a.rostoDetectado?"text-success":"text-primary"),i(),b(a.mensagem),i(9),c("ngIf",!a.foto),i(),c("ngIf",a.foto),i(),c("disabled",a.carregando),i(2),y(" ",a.foto?"Capturar Nova Foto":"Capturar Foto"," "),i(23),c("disabled",!a.rostoDetectado||a.carregando),i(3),c("disabled",a.carregando))},dependencies:[A,P,M,k,R,w,D,F,O,T,z,B,N,U,H,L,j,q,S,I,E],styles:[".container[_ngcontent-%COMP%]{padding:16px}.status-container[_ngcontent-%COMP%]{text-align:center;padding:16px}.status-container[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin-bottom:16px}.text-success[_ngcontent-%COMP%]{color:var(--ion-color-success);font-weight:500}.text-primary[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:500}.foto-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px}.foto-placeholder[_ngcontent-%COMP%]{padding:40px;background:var(--ion-color-light);border-radius:8px;color:var(--ion-color-medium)}.foto-placeholder[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-bottom:8px}.foto-preview-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.foto-preview[_ngcontent-%COMP%]{max-width:100%;max-height:300px;border-radius:8px;box-shadow:0 2px 8px #0000001a}.detection-overlay[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;background:#ffffffe6;padding:8px 12px;border-radius:16px;display:flex;align-items:center;gap:4px;font-size:12px;font-weight:500;color:var(--ion-color-success)}.action-buttons[_ngcontent-%COMP%]{margin-top:24px;display:flex;flex-direction:column;gap:12px}"]});let r=l;return r})();export{re as CadastroRostoPage};
